\documentclass[10pt]{article} % 5p gir 2 kolonner pr side. 1p gir 1 kolonne pr side.

% Defines fonts and language settnings
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[T1]{fontenc}
% \usepackage{lmodern}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel} % Tilpasning til norsk.
\usepackage{mathtools}

\usepackage{subcaption} \usepackage{caption}

% Defines the style for the codeblocks
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{listings}
\usepackage{geometry}
\geometry{left=1.0in,right=1.0in,top=1.0in,bottom=1.0in }

\lstset{ frame=top,frame=bottom,
  basicstyle=\normalfont,
  stepnumber=1, % the step between two line-numbers. If it is 1 each line will be numbered
  numbersep=10pt, % how far the line-numbers are from the code
  tabsize=2, % tab size in blank spaces
  extendedchars=true, %
  breaklines=true, % sets automatic line breaking
  captionpos=t, % sets the caption-position to top
  mathescape=true,
  mathescape=true,
  literate=
         {=}{$\leftarrow{}$}{1}
         {+=}{${}\uparrow{}$}{2}
         {==}{$={}$}{2}
         {||}{OR}{2},
  showspaces=false, % Leerzeichen anzeigen ?
  showtabs=false, % Tabs anzeigen ?
  xleftmargin=17pt, framexleftmargin=17pt, framexrightmargin=17pt,
  framexbottommargin=5pt,
  framextopmargin=5pt,
  showstringspaces=false % Leerzeichen in Strings anzeigen ?
} \lstMakeShortInline[columns=fixed]|

\DeclareCaptionFormat{listing}{\rule{\dimexpr\textwidth+17pt\relax}{0.4pt}\par\vskip1pt#1#2#3}
\captionsetup[lstlisting]{format=listing,singlelinecheck=false, margin=0pt,
  font={sf},labelsep=space,labelfont=bf}

\renewcommand\lstlistingname{Algorithm}

%%
%% Julia definition (c) 2014 Jubobs
%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\lstdefinelanguage{Julia}%
  {morekeywords={abstract,break,case,catch,const,continue,do,else,elseif,%
      end,export,false,for,function,immutable,import,importall,if,in,%
      macro,module,otherwise,quote,return,switch,true,try,type,typealias,%
      using,while},%
   sensitive=true,%
   alsoother={$},%
   morecomment=[l]\#,%
   morecomment=[n]{\#=}{=\#},%
   morestring=[s]{"}{"},%
   morestring=[m]{'}{'},%
}[keywords,comments,strings]%

\lstset{%
    language         = Julia,
    keywordstyle     = \bfseries,
    stringstyle      = \color{magenta},
    commentstyle     = \color{ForestGreen},
    showstringspaces = false,
}

\begin{document}

\lstinputlisting[language=Julia, 
                 caption=Recursive route-counting function,
            ]{countRoutes.jl}
            
\lstinputlisting[language=Julia, 
                 caption=Recursive route-counting function,
            ]{countRoutes2.jl}

\end{document}